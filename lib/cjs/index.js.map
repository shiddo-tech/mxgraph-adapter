{"version":3,"file":"index.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/mxgraph/mxgraph.messages.js","../../src/mxgraph/mxgraph.enums.js","../../src/utils/adapter.utils.js","../../src/utils/file.utils.js","../../src/mxgraph/mxgraph.report.js","../../src/mxgraph/mxgraph.mapper.js","../../src/mxgraph/mxgraph.import.js","../../src/mxgraph/mxgraph.export.js","../../src/mxgraph.toolbar.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","let messages = {\n  exportTitle: 'Exportar diagrama da plataforma Governance',\n  importTitle: 'Importar diagrama da plataforma Governance',\n  importTitleDisabled:\n    'Não é possível importar o diagrama da plataforma Governance, pois o diagrama já foi iniciado',\n  emptyFile: 'Arquivo em branco',\n  invalidFile: 'Arquivo inválido',\n  containNoCells: 'Não foram encontradas células para serem importadas',\n  errorImportingFile: 'Erro ao importar arquivo',\n  errorExportingFile: 'Erro ao exportar arquivo',\n  modalSuccessMessage:\n    'O diagrama foi importado da plataforma Governance com sucesso e sem nenhuma incompatibilidade detectada.',\n  modalErrorMessage: 'O diagrama foi importado da plataforma Governance com incompatibilidades. Clique em \"Ok\" para baixar o relatório',\n  modalSuccessButtonOk: 'Ok',\n  modalErrorButtonOk: 'Ok',\n};\n\nexport function setMessages(customMessages) {\n  messages = { ...messages, ...customMessages };\n}\n\nexport function getMessages() {\n  return messages;\n}\n","export const Application = {\n  GOVERNANCE: 'GOVERNANCE',\n  STUDIO: 'STUDIO',\n};\n\nexport const DiagramType = {\n  bpmn: 'bpmn',\n  process: 'process',\n};\n\nexport const FileExtension = {\n  MODELER: 'mdr',\n};\n\nexport const FileError = {\n  EMPTY_FILE: 'EMPTY_FILE',\n  INVALID_FILE: 'INVALID_FILE',\n  INVALID_DATA: 'INVALID_DATA',\n  CONTAIN_NO_CELLS: 'CONTAIN_NO_CELLS'\n};\n","import { xml2json, json2xml } from 'xml-js';\n\nfunction sanitizeValue(value) {\n  const breakLine = '&#xA;';\n\n  return value.replaceAll('\\n', breakLine);\n}\n\nexport function convertXmlToJson(xml, options = { compact: true, spaces: 4 }) {\n  if (!xml) {\n    return;\n  }\n\n  return JSON.parse(\n    xml2json(xml, {\n      ...options,\n      attributeValueFn: sanitizeValue,\n    })\n  );\n}\n\nexport function convertJsonToXml(json, options = { compact: true, spaces: 4 }) {\n  if (!json) {\n    return;\n  }\n\n  return json2xml(json, options);\n}\n\nexport function downloadFile({\n  filename,\n  content,\n  extension = 'xml',\n  type = 'application/xml',\n}) {\n  const blob = new Blob([content], { type });\n  const url = window.URL.createObjectURL(blob);\n\n  const linkElement = document.createElement('a');\n  linkElement.href = url;\n  linkElement.download = `${filename}.${extension}`;\n  linkElement.click();\n}\n\nexport function getXmlGraph(graph) {\n  const codec = new window.mxCodec();\n  const xmlModel = codec.encode(graph.getModel());\n  const rootElement = xmlModel.getElementsByTagName('root')[0];\n\n  rootElement.setAttribute('version', '1.1');\n\n  return xmlModel;\n}\n\nexport function getXmlTextGraph(graph) {\n  const xmlGrapah = getXmlGraph(graph);\n  return mxUtils.getXml(xmlGrapah);\n}\n","import { FileExtension } from '../mxgraph/mxgraph.enums';\n\nfunction removeElement(element) {\n  return element.parentElement.removeChild(element);\n}\n\nfunction readFile(event) {\n  return new Promise((resolve) => {\n    const fileInput = event.target;\n    const file = event.target.files[0];\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      removeElement(fileInput);\n      resolve(e.target.result);\n    };\n    reader.readAsText(file);\n  });\n}\n\nexport function openFile() {\n  return new Promise((resolve) => {\n    const fileInput = document.createElement('input');\n    fileInput.type = 'file';\n    fileInput.style.display = 'none';\n    fileInput.accept = `.${FileExtension.MODELER}`;\n\n    fileInput.onchange = async (event) => {\n      const fileContent = await readFile(event);\n      resolve(fileContent);\n    };\n\n    document.body.appendChild(fileInput);\n    fileInput.click();\n  });\n}\n\nexport function generateCsvReport({ rows = [], fileName = 'report.csv' }) {\n  if (!rows.length) {\n    return;\n  }\n\n  const csvContent =\n    'data:text/csv;charset=utf-8,' + rows.map((e) => e.join(',')).join('\\n');\n  const encodedUri = encodeURI(csvContent);\n\n  const link = document.createElement('a');\n  link.setAttribute('href', encodedUri);\n  link.setAttribute('download', `${fileName}.csv`);\n  document.body.appendChild(link);\n\n  link.click();\n\n  document.body.removeChild(link);\n}\n","import { getMessages } from './mxgraph.messages';\nimport { generateCsvReport } from '../utils/file.utils';\n\nexport function handleImportedCells({ hasUnsupported, importedCellsReport }) {\n  const messages = getMessages();\n\n  if (hasUnsupported) {\n    createModal({\n      content: messages.modalErrorMessage,\n      okButtonText: messages.modalErrorButtonOk,\n      onOk: () => {\n        generateCsvReport({\n          rows: importedCellsReport,\n          fileName: 'governance-imported-cells',\n        });\n      },\n    });\n\n    return;\n  }\n\n  createModal({\n    content: messages.modalSuccessMessage,\n    okButtonText: messages.modalSuccessButtonOk,\n  });\n}\n\nfunction createModal({ content, okButtonText, onOk }) {\n  const modal = document.createElement('div');\n\n  modal.classList = 'mxgraph-import-export-adapter-modal';\n  modal.innerHTML = `\n    <div class=\"card-modal\">\n        ${content}\n        <div class=\"card-modal__actions\">\n            <button class=\"confirm-button\">${okButtonText}</button>\n        </div>\n    </div>\n    `;\n\n  document.body.appendChild(modal);\n\n  const confirmButton = document.querySelector(\n    '.mxgraph-import-export-adapter-modal .card-modal .confirm-button'\n  );\n\n  confirmButton.addEventListener('click', () => {\n    onOk?.();\n    document.body.removeChild(modal);\n  });\n}\n\nexport function sanitizeCellContent(value) {\n  return value?.replaceAll('&#xA;', ' ');\n}\n","import { Application } from './mxgraph.enums';\nimport { handleImportedCells, sanitizeCellContent } from './mxgraph.report';\n\nconst { GOVERNANCE, STUDIO } = Application;\n\nexport function mapCells({ mxCells, metadata, consumer }) {\n  // TODO Tratar metadata\n  const { app, diagramType, version } = metadata;\n\n  const sourceApp = app._text;\n  const targetApp = consumer;\n\n  if (sourceApp === GOVERNANCE && targetApp === STUDIO) {\n    const markersNotSupported = [\n      'markerPoint',\n      'marker-ad-hoc',\n      'marker-compensation',\n      'marker-sequential-mi',\n      'marker-parallel-mi',\n    ];\n\n    const unsupportedCells = [\n      'DATA_STORE',\n      'WORKFLOW_INTERFACE',\n      'INTERMEDIATE_EVENT',\n    ];\n\n    let hasUnsupported = false;\n    let importedCellsReport = [['Tipo do elemento', 'Valor', 'Status']];\n\n    let filteredCells = mxCells.filter(\n      (cell) => !markersNotSupported.includes(cell._attributes?.style)\n    );\n\n    filteredCells = filteredCells.map((cell) => {\n      const { type, value, style } = cell?._attributes || {};\n      const normalizeValue = value || '';\n\n      if (type === 'TASK') {\n        return handleTask({ cell, importedCellsReport });\n      }\n\n      if (type === 'GATEWAY') {\n        return handleGateway({ cell, importedCellsReport });\n      }\n\n      if (type === 'START_EVENT') {\n        return handleStartEvent({ cell, importedCellsReport });\n      }\n\n      if (type === 'END_EVENT') {\n        return handleEndEvent({ cell, importedCellsReport });\n      }\n\n      if (style === 'marker-loop') {\n        cell._attributes.style = 'attribute-loop';\n      }\n\n      if (style === 'lane') {\n        return handleLane({ cell, importedCellsReport });\n      }\n\n      if (style === 'annotation') {\n        importedCellsReport.push([\n          style,\n          sanitizeCellContent(value),\n          'Importado',\n        ]);\n      }\n\n      // Elementos não suportados\n      if (unsupportedCells.includes(type)) {\n        cell._attributes.value = normalizeValue;\n        cell._attributes.style = 'unsupported';\n        cell._attributes.subType = 'none';\n        cell.mxGeometry._attributes.width = 125;\n        cell.mxGeometry._attributes.height = 60;\n\n        importedCellsReport.push([\n          style,\n          sanitizeCellContent(value),\n          'Não suportado',\n        ]);\n        hasUnsupported = true;\n      }\n\n      return cell;\n    });\n\n    handleImportedCells({ hasUnsupported, importedCellsReport });\n\n    return filteredCells;\n  }\n\n  return mxCells;\n}\n\nfunction handleTask({ cell, importedCellsReport }) {\n  const { subType, style, value } = cell?._attributes || {};\n\n  if (!['script', 'none'].includes(subType)) {\n    cell._attributes.style = 'task';\n    cell._attributes.subType = 'none';\n\n    importedCellsReport.push([style, sanitizeCellContent(value), 'Adaptado']);\n  } else {\n    importedCellsReport.push([style, sanitizeCellContent(value), 'Importado']);\n  }\n\n  return mapCellModel(cell);\n}\n\nfunction handleGateway({ cell, importedCellsReport }) {\n  const { subType, style, value } = cell?._attributes || {};\n  const unsupportedGateway = ['none', 'inclusive', 'event-based'];\n\n  if (unsupportedGateway.includes(subType)) {\n    cell._attributes.style = 'gateway-exclusive';\n    cell._attributes.subType = 'exclusive';\n\n    importedCellsReport.push([style, sanitizeCellContent(value), 'Adaptado']);\n  } else {\n    importedCellsReport.push([style, sanitizeCellContent(value), 'Importado']);\n  }\n\n  return mapCellModel(cell);\n}\n\nfunction handleStartEvent({ cell, importedCellsReport }) {\n  const { subType, style, value } = cell?._attributes || {};\n\n  if (!['none'].includes(subType)) {\n    cell._attributes.style = 'start-event';\n    cell._attributes.subType = 'none';\n\n    importedCellsReport.push([style, sanitizeCellContent(value), 'Adaptado']);\n  } else {\n    importedCellsReport.push([style, sanitizeCellContent(value), 'Importado']);\n  }\n\n  cell.mxGeometry._attributes.width = 32;\n  cell.mxGeometry._attributes.height = 32;\n\n  return mapCellModel(cell);\n}\n\nfunction handleEndEvent({ cell, importedCellsReport }) {\n  const { style, value } = cell?._attributes || {};\n\n  cell._attributes.style = 'end-event-terminate';\n  cell._attributes.subType = 'none';\n  cell.mxGeometry._attributes.width = 32;\n  cell.mxGeometry._attributes.height = 32;\n\n  importedCellsReport.push([style, sanitizeCellContent(value), 'Adaptado']);\n\n  return mapCellModel(cell);\n}\n\nfunction handleLane({ cell, importedCellsReport }) {\n  const { style, value } = cell?._attributes || {};\n\n  importedCellsReport.push([style, sanitizeCellContent(value), 'Importado']);\n\n  return mapCellModel(cell);\n}\n\nfunction mapCellModel(cell) {\n  return {\n    _attributes: {\n      id: cell._attributes.id,\n      value: cell._attributes.value || '',\n      style: cell._attributes.style,\n      vertex: cell._attributes.vertex,\n      parent: cell._attributes.parent,\n    },\n    mxGeometry: {\n      _attributes: {\n        as: cell.mxGeometry._attributes.as,\n        x: cell.mxGeometry._attributes.x,\n        y: cell.mxGeometry._attributes.y,\n        width: cell.mxGeometry._attributes.width,\n        height: cell.mxGeometry._attributes.height,\n      },\n    },\n  };\n}\n","// Enums\nimport { FileError } from './mxgraph.enums';\n\n// Utils\nimport { convertXmlToJson, convertJsonToXml } from '../utils/adapter.utils';\nimport * as FileUtils from '../utils/file.utils';\n\n// Mappers\nimport { mapCells } from './mxgraph.mapper';\n\nexport async function importMxGraphFile({ consumer }) {\n  const modelerContent = await FileUtils.openFile();\n  const jsonContent = convertXmlToJson(modelerContent);\n\n  if (!jsonContent) {\n    throw new Error(FileError.EMPTY_FILE);\n  }\n\n  const { metadata, mxGraphModel } = jsonContent.modeler || {};\n\n  const validMetadata =\n    metadata?.app && metadata?.diagramType && metadata?.version;\n\n  const validMxGraphModel = mxGraphModel?.root;\n\n  if (!validMetadata || !validMxGraphModel) {\n    throw new Error(FileError.INVALID_FILE);\n  }\n\n  const containCells = Object.keys(mxGraphModel.root.mxCell || {}).length;\n\n  if (!containCells) {\n    throw new Error(FileError.CONTAIN_NO_CELLS);\n  }\n\n  mxGraphModel.root.mxCell = mapCells({\n    mxCells: mxGraphModel.root.mxCell,\n    metadata,\n    consumer,\n  });\n\n  return convertJsonToXml({ mxGraphModel });\n}\n","// Enums\nimport { FileExtension, FileError } from './mxgraph.enums';\n\n// Utils\nimport {\n  convertXmlToJson,\n  convertJsonToXml,\n  downloadFile,\n} from '../utils/adapter.utils';\n\nexport function exportMxGraphFile({ xml = '', metadata }) {\n  let jsonContent = convertXmlToJson(xml);\n\n  if (!jsonContent) {\n    throw new Errorr(FileError.EMPTY_FILE);\n  }\n\n  const modelerContent = {\n    modeler: Object.assign({ metadata }, jsonContent),\n  };\n\n  const xmlContent = convertJsonToXml(modelerContent);\n\n  downloadFile({\n    filename: 'workflow',\n    content: xmlContent,\n    extension: FileExtension.MODELER,\n  });\n}\n","import { getMessages, setMessages } from './mxgraph/mxgraph.messages';\nimport { Application, DiagramType, FileError } from './mxgraph/mxgraph.enums';\nimport { getXmlTextGraph } from './utils/adapter.utils';\nimport { importMxGraphFile, exportMxGraphFile } from './mxgraph';\n\nconst { GOVERNANCE, STUDIO } = Application;\nconst { bpmn } = DiagramType;\n\nclass MxGraphToolbar {\n  app = null;\n  version = null;\n  diagramType = null;\n  graph = null;\n  renderGraph = null;\n  toolbar = null;\n  importButton = null;\n  exportButton = null;\n  notification = null;\n\n  init({\n    app,\n    version,\n    diagramType,\n    graph,\n    renderGraph,\n    notification,\n    customClass = '',\n    messages = {},\n    targetContainer = 'body',\n    targetContainersFirstChild = true,\n  }) {\n    // com app é possível identificar se é STUDIO ou GOVERNANCE\n    this.app = app;\n    this.version = version;\n    this.diagramType = diagramType;\n    this.graph = graph;\n    this.notification = notification;\n    this.renderGraph = renderGraph;\n    this.initialCellsNumber = Object.keys(this.graph.model.cells).length;\n\n    setMessages(messages);\n\n    if (!this.graph) {\n      throw new Error('Graph not found');\n    }\n\n    if (!this.app) {\n      throw new Error('App not found');\n    }\n\n    if (!this.renderGraph) {\n      throw new Error('Render graph not found');\n    }\n\n    if (!this.notification) {\n      throw new Error('Notification system not found');\n    }\n\n    if (this.diagramType !== bpmn) {\n      console.warn(`Unsupported ${this.diagramType}`);\n      return;\n    }\n\n    this.createToolbar({\n      customClass,\n      targetContainer,\n      targetContainersFirstChild,\n    });\n  }\n\n  destroy() {\n    if (this.toolbar) {\n      this.toolbar.parentElement.removeChild(this.toolbar);\n    }\n  }\n\n  canImportFile() {\n    const currentCellsNumber = Object.keys(this.graph.model.cells).length;\n\n    // A estrutura do studio inicia com 2 células\n    if (this.app === STUDIO) {\n      return this.initialCellsNumber === 2 && currentCellsNumber === 2;\n    }\n\n    // A estrutura do Governance inicia com 5 células\n    return this.initialCellsNumber <= 5 && currentCellsNumber <= 5;\n  }\n\n  createToolbar({ targetContainer, targetContainersFirstChild, customClass }) {\n    const messages = getMessages();\n\n    this.toolbar = document.createElement('div');\n    this.toolbar.classList.add('mxgraph-import-export-toolbar');\n\n    if (customClass) {\n      this.toolbar.classList.add(customClass);\n    }\n\n    const shouldImportFile = this.canImportFile();\n\n    if (this.app === STUDIO) {\n      this.importButton = document.createElement('button');\n      this.importButton.classList.add('import-button', 'btn');\n      // this.importButton.disabled = !shouldImportFile;\n      this.importButton.title = shouldImportFile\n        ? messages.importTitle\n        : messages.importTitleDisabled;\n\n      this.importButton.innerHTML = `\n        <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M29.06 14.3607L31.56 12M31.56 12L34.06 14.3607M31.56 12L31.56 21\" stroke=\"black\" stroke-width=\"1.5\"/>\n          <path d=\"M11.86 19.14H10.04V17.48C10.04 17.24 10 17.0867 9.92 17.02C9.84 16.94 9.68 16.9 9.44 16.9H8.42C8.18 16.9 8.02 16.94 7.94 17.02C7.86 17.0867 7.82 17.24 7.82 17.48V26.02C7.82 26.26 7.86 26.42 7.94 26.5C8.02 26.5667 8.18 26.6 8.42 26.6H9.44C9.68 26.6 9.84 26.5667 9.92 26.5C10 26.42 10.04 26.26 10.04 26.02V22.96H9.04V21.56H11.86V26.24C11.86 27.4267 11.24 28.02 10 28.02H7.86C6.62 28.02 6 27.4267 6 26.24V17.24C6 16.0667 6.62 15.48 7.86 15.48H10C11.24 15.48 11.86 16.0667 11.86 17.24V19.14Z\" fill=\"black\"/>\n          <path d=\"M15.5167 15.48H17.7367C18.9767 15.48 19.5967 16.0667 19.5967 17.24V26.24C19.5967 27.4133 18.9767 28 17.7367 28H15.5167C14.2634 28 13.6367 27.4133 13.6367 26.24V17.24C13.6367 16.0667 14.2634 15.48 15.5167 15.48ZM17.7967 25.96V17.52C17.7967 17.28 17.7567 17.1267 17.6767 17.06C17.5967 16.98 17.4367 16.94 17.1967 16.94H16.0367C15.7967 16.94 15.6367 16.98 15.5567 17.06C15.4901 17.1267 15.4567 17.28 15.4567 17.52V25.96C15.4567 26.2 15.4901 26.36 15.5567 26.44C15.6367 26.5067 15.7967 26.54 16.0367 26.54H17.1967C17.4367 26.54 17.5967 26.5067 17.6767 26.44C17.7567 26.36 17.7967 26.2 17.7967 25.96Z\" fill=\"black\"/>\n          <path d=\"M25.8683 15.48H27.7283L25.4683 28H22.9083L20.6483 15.48H22.5083L24.1683 26.34L25.8683 15.48Z\" fill=\"black\"/>\n        </svg>      \n      `;\n\n      this.toolbar.appendChild(this.importButton);\n\n      this.importButton.addEventListener(\n        'click',\n        this.onClickImportButton.bind(this)\n      );\n    }\n\n    if (this.app === GOVERNANCE) {\n      this.exportButton = document.createElement('button');\n      this.exportButton.classList.add('export-button', 'btn');\n      this.exportButton.title = messages.exportTitle;\n\n      this.exportButton.innerHTML = `\n        <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M34.06 18.6393L31.56 21M31.56 21L29.06 18.6393M31.56 21L31.56 12\" stroke=\"black\" stroke-width=\"1.5\"/>\n          <path d=\"M11.86 19.14H10.04V17.48C10.04 17.24 10 17.0867 9.92 17.02C9.84 16.94 9.68 16.9 9.44 16.9H8.42C8.18 16.9 8.02 16.94 7.94 17.02C7.86 17.0867 7.82 17.24 7.82 17.48V26.02C7.82 26.26 7.86 26.42 7.94 26.5C8.02 26.5667 8.18 26.6 8.42 26.6H9.44C9.68 26.6 9.84 26.5667 9.92 26.5C10 26.42 10.04 26.26 10.04 26.02V22.96H9.04V21.56H11.86V26.24C11.86 27.4267 11.24 28.02 10 28.02H7.86C6.62 28.02 6 27.4267 6 26.24V17.24C6 16.0667 6.62 15.48 7.86 15.48H10C11.24 15.48 11.86 16.0667 11.86 17.24V19.14Z\" fill=\"black\"/>\n          <path d=\"M15.5167 15.48H17.7367C18.9767 15.48 19.5967 16.0667 19.5967 17.24V26.24C19.5967 27.4133 18.9767 28 17.7367 28H15.5167C14.2634 28 13.6367 27.4133 13.6367 26.24V17.24C13.6367 16.0667 14.2634 15.48 15.5167 15.48ZM17.7967 25.96V17.52C17.7967 17.28 17.7567 17.1267 17.6767 17.06C17.5967 16.98 17.4367 16.94 17.1967 16.94H16.0367C15.7967 16.94 15.6367 16.98 15.5567 17.06C15.4901 17.1267 15.4567 17.28 15.4567 17.52V25.96C15.4567 26.2 15.4901 26.36 15.5567 26.44C15.6367 26.5067 15.7967 26.54 16.0367 26.54H17.1967C17.4367 26.54 17.5967 26.5067 17.6767 26.44C17.7567 26.36 17.7967 26.2 17.7967 25.96Z\" fill=\"black\"/>\n          <path d=\"M25.8683 15.48H27.7283L25.4683 28H22.9083L20.6483 15.48H22.5083L24.1683 26.34L25.8683 15.48Z\" fill=\"black\"/>\n        </svg>\n      `;\n\n      this.toolbar.appendChild(this.exportButton);\n\n      this.exportButton.addEventListener(\n        'click',\n        this.onClickExportButton.bind(this)\n      );\n    }\n\n    const container = document.querySelector(targetContainer);\n\n    if (!container) {\n      console.warn(`Mxgraph import export toolbar target container not found`);\n      return;\n    }\n\n    targetContainersFirstChild\n      ? container.prepend(this.toolbar)\n      : container.appendChild(this.toolbar);\n  }\n\n  async onClickImportButton() {\n    const messages = getMessages();\n\n    try {\n      if (!this.canImportFile()) {\n        this.showError(messages.importTitleDisabled);\n        return;\n      }\n\n      const modelerXml = await importMxGraphFile({\n        consumer: this.app,\n      });\n\n      this.renderGraph(modelerXml);\n    } catch (error) {\n      let message = messages.errorImportingFile;\n\n      if (error.message === FileError.EMPTY_FILE) {\n        message = messages.emptyFile || message;\n      }\n\n      if (error.message === FileError.INVALID_FILE) {\n        message = messages.invalidFile || message;\n      }\n\n      if (error.message === FileError.CONTAIN_NO_CELLS) {\n        message = messages.containNoCells || message;\n      }\n\n      this.showError(message);\n    }\n  }\n\n  showError(message) {\n    this.notification.error({\n      position: 'topRight',\n      timeout: 1000 * 4,\n      progressBar: true,\n      message,\n    });\n  }\n\n  onClickExportButton() {\n    const messages = getMessages();\n\n    try {\n      const xml = getXmlTextGraph(this.graph);\n      const metadata = {\n        app: this.app,\n        version: this.version,\n        diagramType: this.diagramType,\n      };\n\n      exportMxGraphFile({ xml, metadata });\n    } catch (error) {\n      this.notification.error({\n        position: 'topRight',\n        timeout: 1000 * 4,\n        progressBar: true,\n        message: messages.errorExportingFile,\n      });\n    }\n  }\n}\n\nexport default new MxGraphToolbar();\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","messages","exportTitle","importTitle","importTitleDisabled","emptyFile","invalidFile","containNoCells","errorImportingFile","errorExportingFile","modalSuccessMessage","modalErrorMessage","modalSuccessButtonOk","modalErrorButtonOk","setMessages","customMessages","getMessages","Application","FileExtension","FileError","sanitizeValue","value","replaceAll","convertXmlToJson","xml","options","arguments","length","undefined","compact","spaces","JSON","parse","xml2json","attributeValueFn","convertJsonToXml","json","json2xml","getXmlTextGraph","graph","xmlGrapah","xmlModel","window","mxCodec","encode","getModel","setAttribute","getXmlGraph","mxUtils","getXml","readFile","event","Promise","resolve","fileInput","target","file","files","reader","FileReader","onload","e","element","parentElement","removeChild","result","readAsText","openFile","display","accept","concat","onchange","_ref","_asyncToGenerator","_regeneratorRuntime","mark","fileContent","wrap","_context","prev","next","sent","stop","_callee","_x","apply","this","body","click","handleImportedCells","hasUnsupported","importedCellsReport","createModal","content","okButtonText","onOk","_ref2","_ref2$rows","rows","_ref2$fileName","fileName","csvContent","map","join","encodedUri","encodeURI","link","generateCsvReport","modal","classList","innerHTML","querySelector","addEventListener","sanitizeCellContent","GOVERNANCE","STUDIO","mapCells","mxCells","metadata","consumer","app","diagramType","version","_text","markersNotSupported","unsupportedCells","filteredCells","filter","cell","_cell$_attributes","includes","_attributes","normalizeValue","_ref3","_ref4","subType","push","mapCellModel","handleTask","_ref5","_ref6","handleGateway","_ref7","_ref8","mxGeometry","width","height","handleStartEvent","_ref9","_ref10","handleEndEvent","_ref11","_ref12","handleLane","id","vertex","parent","as","x","y","importMxGraphFile","_importMxGraphFile","modelerContent","jsonContent","mxGraphModel","validMetadata","validMxGraphModel","FileUtils","Error","modeler","root","Object","keys","mxCell","abrupt","exportMxGraphFile","_ref$xml","Errorr","filename","_ref$extension","extension","_ref$type","blob","Blob","url","URL","createObjectURL","linkElement","href","download","downloadFile","assign","MxGraphToolbar","_classCallCheck","_defineProperty","_onClickImportButton","key","renderGraph","notification","_ref$customClass","customClass","_ref$messages","_ref$targetContainer","targetContainer","_ref$targetContainers","targetContainersFirstChild","initialCellsNumber","model","cells","createToolbar","console","warn","toolbar","currentCellsNumber","add","shouldImportFile","canImportFile","importButton","title","onClickImportButton","bind","exportButton","onClickExportButton","container","prepend","modelerXml","message","showError","t0","error","position","timeout","progressBar","mxgraph_toolbar"],"mappings":"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"}